{% extends "base.html.twig" %}

{% block title %}Administration
{% endblock %}


{% block body %}

	{% block sidebar %}
			{% include "_partials/sidebar.html.twig" %}
	{% endblock %}

	<!-- Main Content -->
    <div class="content">
        <div class="container mt-4">
    		<!-- Section des blocs verts -->
			<div class="row mb-4">
				<div class="col-md-3">
					<div class="card bg-success text-white text-center">
						<div class="card-body">
							<h5 class="card-title">Orthophonistes Inscrits</h5>
							<p class="card-text fs-3">45</p>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="card bg-success text-white text-center">
						<div class="card-body">
							<h5 class="card-title">Patients Enregistrés</h5>
							<p class="card-text fs-3">120</p>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="card bg-success text-white text-center">
						<div class="card-body">
							<h5 class="card-title">Evaluations Effectuées</h5>
							<p class="card-text fs-3">300</p>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="card bg-success text-white text-center">
						<div class="card-body">
							<h5 class="card-title">Tests en Attente</h5>
							<p class="card-text fs-3">15</p>
						</div>
					</div>
				</div>
			</div>
							

			<!-- Section des graphes -->
			<div class="row chart-container">
				<!-- Pie Chart -->
				<div class="col-md-6 chart">
					<h3>Répartition des Tests</h3>
					<canvas id="pieChart"></canvas>
				</div>

				<!-- Bar Chart -->
				<div class="col-md-6 chart">
					<h3>Progression Annuelle</h3>
					<canvas id="barChart"></canvas>
				</div>
			</div>
		</div>
		
    </div>
		<!-- footer -->
		{% block footer %}
			
		{% endblock %}
	<!-- Ajouter Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Pie Chart
        const pieCtx = document.getElementById('pieChart').getContext('2d');
        new Chart(pieCtx, {
            type: 'pie',
            data: {
                labels: ['Succès', 'Échec', 'En Attente'],
                datasets: [{
                    label: 'Répartition des Tests',
                    data: [40, 30, 30],
                    backgroundColor: ['#28a745', '#dc3545', '#ffc107'],
                    borderWidth: 1
                }]
            },
            options: {
                plugins: {
                    legend: {
                        position: 'left',
                        labels: {
                            font: {
                                size: 14
                            }
                        }
                    }
                }
            }
        });

         // Bar Chart
        const barCtx = document.getElementById('barChart').getContext('2d');
        new Chart(barCtx, {
            type: 'bar',
            data: {
                labels: ['janvier', 'fevrier', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Aout', 'Septembre', 'Octobre', 'Novembre','Decembre'],
                datasets: [{
                    label: 'Progression annuel',
                    data: [30, 50, 70, 90, 100, 0, 7, 4,  50, 70, 90, 100, 0, 9 ],
                    backgroundColor: ['#007bff', '#28a745', '#ffc107', '#dc3545', '#6c757d'],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    </script>
{% endblock %}
